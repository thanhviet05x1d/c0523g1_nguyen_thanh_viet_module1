<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>[Thực hành] Rut gon String</title>

</head>
<body>
<script>

    // 1. Cách viết dài nhưng dễ hiểu

    let s1Arr = [1, 2, 2, 3, 1, 3, 1, 3];
    let newArr = [];
    let newCount = [];

    function kiemTraLap(s1Arr) { // 1. Lấy ra mảng ký tự duy nhất
        for (let i = 0; i < s1Arr.length; i++) {
            if (newArr.indexOf(s1Arr[i]) === -1) {
                newArr.push(s1Arr[i]);
            }
        }

        for (let i = 0; i < newArr.length; i++) { // 2. Tìm tần suất xuất hiện ký tự duy nhất đẩy vào mànảng
            let dem = 0;
            for (let j = 0; j < s1Arr.length; j++) {
                if (newArr[i] === s1Arr[j]) {
                    dem++;
                }
            }
            newCount.push(dem);
        }

        for (let i = 1; i < newCount.length; i++) { // 3. Kiểm tra các tần xuất hiện giống nhau không
            if (newCount[i]!==newCount[i-1]){
                return 'NO'
            }
        }
        return 'OK';
    }


    console.log(kiemTraLap(s1Arr));

    // 2. Cách viết gọn nhưng cần kiến thư
    // Mã JavaScript trong đoạn code của bạn có vẻ đúng và không có lỗi cú pháp.
    // Tuy nhiên, có một số cải tiến mà bạn có thể áp dụng để làm mã ngắn hơn và hiệu quả hơn:
    // Cải tiến này sử dụng các phương thức như Set và map để làm mã ngắn hơn và tối ưu hơn.

    function kiemTraLap1(s1Arr) {
        let newArr = [...new Set(s1Arr)]; // 1. Lấy ra mảng ký tự duy nhất
        let newCount = newArr.map((item) => s1Arr.filter((x) => x === item).length); // 2. Tìm tần suất xuất hiện ký tự duy nhất

        return newCount.every((count) => count === newCount[0]) ? 'OK' : 'NO'; // 3. Kiểm tra các tần suất xuất hiện giống nhau không
    }

    // let s1Arr = [1, 2, 2, 3, 1, 3, 1, 3];
    console.log(kiemTraLap1(s1Arr));



</script>
</body>
</html>